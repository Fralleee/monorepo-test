//////////////////////////////////////////////////////////////////////////////////////////////
// DO NOT MODIFY THIS FILE                                                                  //
// This file is automatically generated by ZenStack CLI and should not be manually updated. //
//////////////////////////////////////////////////////////////////////////////////////////////

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "src\\generated\\logical-prisma-client"
}

/// @@allow('read', auth() != null)
/// @@allow('create,update,delete', auth().role == 'ADMIN')
model Clinic {
  id                 String               @id() @default(cuid())
  name               String
  code               String               @unique()
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt()
  treatmentsByClinic TreatmentsByClinic[]
}

/// @@allow('read', auth() != null)
/// @@allow('create,update,delete', auth().role == 'ADMIN')
model Treatment {
  id                        String               @id() @default(cuid())
  name                      String
  description               String?
  price                     Decimal              @db.Decimal(10, 2)
  maintenanceIntervalMonths Int?
  createdAt                 DateTime             @default(now())
  updatedAt                 DateTime             @updatedAt()
  treatmentsByClinic        TreatmentsByClinic[]
}

/// @@allow('read', auth() != null)
/// @@allow('create,update,delete', auth().role == 'ADMIN')
model TreatmentsByClinic {
  id            String    @id() @default(cuid())
  clinic        Clinic    @relation(fields: [clinicId], references: [id], onDelete: Cascade)
  clinicId      String
  treatment     Treatment @relation(fields: [treatmentId], references: [id], onDelete: Cascade)
  treatmentId   String
  priceOverride Decimal?  @db.Decimal(10, 2)
  notes         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt()

  @@unique([clinicId, treatmentId])
}
